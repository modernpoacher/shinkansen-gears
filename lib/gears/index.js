'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _react=require('react');var _react2=_interopRequireDefault(_react);var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _immutable=require('immutable');var _immutable2=_interopRequireDefault(_immutable);var _shinkansenRails=require('shinkansen-rails');var _reverse=require('./reverse');var _reverse2=_interopRequireDefault(_reverse);var _forward=require('./forward');var _forward2=_interopRequireDefault(_forward);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function renderReverse(reverse,pattern){if(_shinkansenRails.Rails.go(reverse,pattern)){const pathname=_shinkansenRails.Rails.to(reverse,pattern);return _react2.default.createElement(_reverse2.default,{pathname:pathname});}return null;}function renderForward(forward,pattern){if(_shinkansenRails.Rails.go(forward,pattern)){const pathname=_shinkansenRails.Rails.to(forward,pattern);return _react2.default.createElement(_forward2.default,{pathname:pathname});}return null;}class Gears extends _react2.default.Component{constructor(...args){var _temp;return _temp=super(...args),this.state={},_temp;}componentWillReceiveProps({reverse,forward}){const r=_immutable2.default.Map(reverse);const f=_immutable2.default.Map(forward);const{reverse:R,forward:F}=this.state;if(!_immutable2.default.is(r,R)){this.setState({reverse:r});}if(!_immutable2.default.is(f,F)){this.setState({forward:f});}}shouldComponentUpdate({pattern},state){const{pattern:PATTERN}=this.props;if(pattern!==PATTERN)return true;const{reverse,forward}=state;const{reverse:REVERSE,forward:FORWARD}=this.state;return reverse!==REVERSE||forward!==FORWARD;}render(){const{reverse,forward,pattern}=this.props;const reverseGear=renderReverse(reverse,pattern);const forwardGear=renderForward(forward,pattern);if(reverseGear||forwardGear){return _react2.default.createElement('ul',{className:'shinkansen-gears'},reverseGear,forwardGear);}return null;}}exports.default=Gears;Gears.defaultProps={reverse:{},forward:{},pattern:_shinkansenRails.Rails.pattern()};Gears.propTypes={reverse:_propTypes2.default.object,forward:_propTypes2.default.object,pattern:_propTypes2.default.string};